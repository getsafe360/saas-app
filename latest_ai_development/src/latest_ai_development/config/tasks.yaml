seo_audit_task:
  description: >
    Perform a full SEO audit on the website at {url}. Check technical SEO, on-page elements, metadata, structure, and authority signals.
    Return a prioritized list of issues with actionable recommendations.
  expected_output: >
    An ordered list of SEO issues, each with a short explanation and clear fix.
  agent: seo_agent

seo_analysis:
  description: |
    You are a SEO / GEO / AEO specialist analyzing the client’s website at {url}.
    Provide SEO (360°) insights including Generative Engine Optimization (GEO), AI Optimization (AIO), and
    Answer Engine Optimization (AEO) alongside technical and on-page SEO fundamentals.
    Explain how AI-driven search and answer engines interpret this site, including structured data quality,
    content retrievability, authority and trust cues, and answer-readiness of key pages.
    Return strict JSON only with fields: module, summary, critical_issues, recommended_actions.
    Each issue/action should include severity, evidence, expected impact, and implementation_priority.
  expected_output: >
    Strict JSON SEO (360°) report with GEO/AIO/AEO insights, blockers, prioritized fixes, and measurable impact rationale.
  agent: seo_analyst

performance_audit_task:
  description: >
    Measure and analyze the website performance at {url}. Include load speed, Core Web Vitals, bottlenecks, and opportunities for optimization.
  expected_output: >
    Key performance metrics and a prioritized list of recommendations to improve load speed and user experience.
  agent: performance_agent

performance_task:
  description: |
    Analyze the web performance profile for {url} with a Core Web Vitals focus.
    Evaluate LCP, INP, CLS, TTFB, render-blocking resources, image/font optimization, caching strategy,
    bundle size, third-party script cost, and server/network bottlenecks.
    Return strict JSON only with fields: module, score, vitals, bottlenecks, recommendations, validation_steps.
    Every recommendation must include priority, estimated impact, implementation_effort, and quick_win flag.
  expected_output: >
    Strict JSON performance audit with Core Web Vitals assessment and prioritized, high-impact optimizations.
  agent: performance_agent

accessibility_audit_task:
  description: >
    Audit the website at {url} for accessibility issues according to WCAG guidelines. Identify missing ARIA labels, navigation issues, color contrast, etc.
  expected_output: >
    A list of accessibility violations and suggestions to make the site more inclusive.
  agent: accessibility_agent

accessibility_repair:
  description: |
    Review accessibility risks for {url} and define practical WCAG 2.2-oriented remediations.
    Assess semantic structure, keyboard navigation, focus management, color contrast, form labeling/errors,
    media alternatives, ARIA misuse, and dynamic-content accessibility.
    Return strict JSON only with fields: module, blockers, repair_plan, validation_steps.
    Include WCAG criteria references, severity, affected users, and implementation notes for each blocker.
  expected_output: >
    Strict JSON accessibility remediation plan with prioritized fixes and explicit validation steps.
  agent: accessibility_repair_specialist

security_audit_task:
  description: >
    Scan {url} for security vulnerabilities. Check for SSL, security headers, exposed admin panels, and other common issues.
  expected_output: >
    Security findings, severity level, and actionable recommendations for each issue.
  agent: security_agent

security_task:
  description: |
    Perform a high-level website security assessment for {url}.
    Review transport security (TLS/SSL), HTTP security headers, cookie flags, authentication/session risks,
    exposed admin or debug surfaces, dependency/configuration weaknesses, and common OWASP-style misconfigurations.
    Return strict JSON only with fields: module, security_score, risks, mitigations, verification_steps.
    Each risk must include severity, confidence, evidence, exploitation_likelihood, and business_impact.
  expected_output: >
    Strict JSON security report with prioritized vulnerabilities and practical mitigation guidance.
  agent: security_agent

content_audit_task:
  description: >
    Review the website content at {url}. Analyze for grammar, keyword distribution, clarity, and user engagement. Highlight strengths and weaknesses.
  expected_output: >
    Summary of content quality, including specific suggestions to improve SEO and user trust.
  agent: content_agent

wordpress_audit_task:
  description: >
    Perform an engineering-grade WordPress diagnostic for {url}.
    The output MUST be strict JSON for deterministic downstream parsing and include:
    module, overall_score, findings[], repair_backlog[], and validation checks.
    Include confidence for each finding and place weak-evidence findings in a manual-verification queue.
  expected_output: >
    Strict JSON WordPress diagnostic with policy checks, prioritized findings, remediation backlog, and validation status.
  agent: wordpress_agent

wordpress_audit:
  description: |
    Perform a production-grade WordPress platform audit for {url}.
    Inspect update posture (core/themes/plugins), backup reliability, plugin/theme risk, cron health,
    database and media hygiene, caching/CDN behavior, uptime resilience, and observability readiness.
    Return strict JSON only with fields: module, overall_score, findings, repair_backlog, validation_checks.
    For each finding include: id, title, severity (critical|high|medium|low), confidence (high|medium|low),
    evidence, business_impact, and fix_summary.
  expected_output: >
    Strict JSON with prioritized WordPress findings, scored risk overview, and verifiable remediation steps.
  agent: wordpress_auditor

affiliate_expansion_task:
  description: >
    Research affiliate and SaaS expansion opportunities for the business at {url}. Suggest partnership types, integration strategies, and white-label opportunities.
  expected_output: >
    Top 3 affiliate/SaaS partnership recommendations, with a brief strategy for each.
  agent: affiliate_agent

scheduling_task:
  description: >
    Plan and automate periodic website audits for {url}. Suggest optimal audit frequency and describe how ongoing monitoring will be maintained.
  expected_output: >
    Audit schedule with recommended intervals and notification strategies.
  agent: scheduler_agent

reporting_task:
  description: |
    Collect and synthesize all audit findings for {url} from WordPress, SEO, accessibility, performance, and security agents.
    Produce a concise, decision-ready markdown report with: executive summary, per-category scorecards,
    top risks/opportunities, repair roadmap by priority, and validation checklist.
    Explicitly include assumptions, data gaps, and next-step ownership recommendations.
  expected_output: >
    Markdown report ready for clients and internal teams, with clear summaries, priority-ranked actions,
    and optimization/repair steps for SEO, performance, accessibility, security, and WordPress platform health.
  agent: reporting_agent


site_snapshot_task:
  description: |
    Produce a fast Pareto-style homepage snapshot for {url} with minimal token usage.
    Cover only the highest-impact findings for categories: accessibility, performance, seo_360, security, and content.
    Limit each category to 2-3 insights and include short evidence and priority.
    If WordPress indicators are present, include lightweight WordPress health checks for admin/backend security,
    outdated plugin/theme risk signals, and backend performance bottlenecks.
    Return strict JSON only with fields: module, platform, categories.
  expected_output: >
    Strict JSON homepage snapshot focused on the highest-impact issues per category.
  agent: sparky_snapshot_agent

site_snapshot:
  description: |
    Create a lightweight homepage snapshot for {url} using the Pareto principle.
    Keep output concise and return strict JSON with fields: module, platform, categories.
    Categories must include: accessibility, performance, seo_360, security, content.
    Provide at most 3 findings per category.
  expected_output: >
    Strict JSON snapshot optimized for fast streaming and low token usage.
  agent: sparky_snapshot_agent

wordpress_snapshot:
  description: |
    Run a lightweight WordPress-focused snapshot for {url}.
    Focus on admin/backend security posture, outdated plugins/themes risk, and backend performance bottlenecks.
    Return strict JSON only with fields: module, wordpress_findings.
  expected_output: >
    Strict JSON WordPress snapshot with concise, high-impact findings.
  agent: wordpress_auditor

sparky_summary:
  description: |
    You are Sparky, a friendly multilingual website assistant. Always reply in the user’s language.
    If the user’s name is known, greet them personally.

    Your job is to give a short, warm, human-like overview of the website’s condition based on the snapshot analysis.
    Keep it concise, helpful, and conversational — like a friendly expert who knows how to explain things clearly.

    If the site is WordPress, highlight the most important findings related to:
    - admin and backend security
    - outdated or risky plugins/themes
    - performance bottlenecks
    - general WordPress health

    If the site is not WordPress, focus on the most impactful issues across:
    - accessibility
    - performance
    - SEO / GEO / AEO
    - content clarity
    - security

    Use the Pareto principle: mention only the most important 2–3 insights per category.

    End with a gentle, friendly call-to-action encouraging the user to create a free account to see the full detailed report and access automated fixes (and WordPress automation if applicable).
    Keep the CTA subtle, positive, and helpful — never pushy.

    Tone guidelines:
    - Warm, modern, human.
    - Short sentences.
    - No jargon unless necessary.

    Input:
    - name (optional)
    - language
    - platform
    - category snapshots

    Output:
    - short summary string
  expected_output: >
    A short multilingual summary string ready to stream as a single SSE summary event.
  agent: sparky_snapshot_agent
