@import "tailwindcss";
@import "tw-animate-css";
@import "./tokens.css";
@import "../styles/components.css";

/* Smooth theme transitions */
html,
body {
  transition: background-color 0.3s, color 0.3s;
}

/* Global Typography + base colors from tokens */
@layer base {
  body {
    font-family: "Geist", Arial, Helvetica, sans-serif;
    background: var(--background-default);
    color: var(--text-default);
  }
}

/* Base border + outline defaults */
@layer base {
  * {
    border-color: var(--border-default);
    outline-color: var(--color-primary-500);
  }
}

/* =========================================================
   CTA EFFECTS
   ========================================================= */

@layer components {
  .cta-effect {
    position: relative;
    border-radius: 1rem;
    overflow: hidden;
    isolation: isolate;
    z-index: 0;
    --glow-o: 0.55;
    --glow-scale: 1;
    --pulse-ms: 7000;
    --sat: 1;
    --bright: 1;
  }

  .cta-effect::before {
    content: "";
    position: absolute;
    inset: -10%;
    border-radius: inherit;
    background:
      radial-gradient(40% 55% at 30% 25%, var(--glow-strong), transparent 65%),
      radial-gradient(55% 60% at 70% 80%, var(--glow-soft), transparent 75%);
    opacity: var(--glow-o);
    transform: scale(var(--glow-scale));
    filter: saturate(var(--sat)) brightness(var(--bright)) blur(0.5px);
    animation: glassPulse var(--pulse-ms) ease-in-out infinite;
    transition: opacity 800ms ease, transform 800ms ease, filter 800ms ease;
    pointer-events: none;
    z-index: 0;
  }

  @keyframes glassPulse {
    0%,
    100% {
      transform: scale(1);
      opacity: 0.45;
    }
    50% {
      transform: scale(1.06);
      opacity: 0.65;
    }
  }

  /* SKY */
  .cta-sky {
    --glow-strong: rgba(14, 165, 233, 0.28);
    --glow-soft: rgba(56, 189, 248, 0.18);
  }
  .dark .cta-sky {
    --glow-strong: rgba(34, 211, 238, 0.28);
    --glow-soft: rgba(56, 189, 248, 0.2);
  }

  /* VIOLET */
  .cta-violet {
    --glow-strong: rgba(124, 58, 237, 0.26);
    --glow-soft: rgba(167, 139, 250, 0.16);
  }
  .dark .cta-violet {
    --glow-strong: rgba(192, 132, 252, 0.28);
    --glow-soft: rgba(139, 92, 246, 0.2);
  }

  /* TEAL */
  .cta-teal {
    --glow-strong: rgba(13, 148, 136, 0.26);
    --glow-soft: rgba(45, 212, 191, 0.16);
  }
  .dark .cta-teal {
    --glow-strong: rgba(20, 184, 166, 0.28);
    --glow-soft: rgba(94, 234, 212, 0.18);
  }

  /* AMBER */
  .cta-amber {
    --glow-strong: rgba(245, 158, 11, 0.26);
    --glow-soft: rgba(251, 191, 36, 0.16);
  }
  .dark .cta-amber {
    --glow-strong: rgba(238, 154, 1, 0.3);
    --glow-soft: rgba(245, 158, 11, 0.18);
  }

  @media (hover: hover) and (pointer: fine) {
    .cta-effect:hover::before,
    .cta-effect:focus-within::before {
      --glow-o: 0.75;
      --glow-scale: 1.03;
      --pulse-ms: 5500;
      --sat: 1.08;
      --bright: 1.06;
    }
  }

  @media (prefers-reduced-motion: reduce) {
    .cta-effect::before {
      animation: none;
      opacity: 0.4;
    }
  }

  /* Hover tints */
  .cta-sky:hover {
    --glow-strong: rgba(14, 165, 233, 0.34);
    --glow-soft: rgba(56, 189, 248, 0.22);
  }
  .dark .cta-sky:hover {
    --glow-strong: rgba(34, 211, 238, 0.36);
    --glow-soft: rgba(56, 189, 248, 0.24);
  }

  .cta-teal:hover {
    --glow-strong: rgba(20, 184, 166, 0.34);
    --glow-soft: rgba(94, 234, 212, 0.22);
  }
  .dark .cta-teal:hover {
    --glow-strong: rgba(20, 184, 166, 0.38);
    --glow-soft: rgba(94, 234, 212, 0.24);
  }

  /* Keyboard focus */
  .cta-effect:focus-within::before {
    opacity: 0.75;
    animation-duration: 3s;
  }

  /* To-top rocket */
  .to-top {
    position: relative;
    isolation: isolate;
  }

  .to-top::before {
    content: "";
    position: absolute;
    inset: -20%;
    z-index: 0;
    border-radius: 9999px;
    background:
      radial-gradient(40% 60% at 25% 30%, rgba(56, 189, 248, 0.22), transparent 70%),
      radial-gradient(50% 65% at 80% 75%, rgba(14, 165, 233, 0.2), transparent 75%);
    filter: blur(1px);
    opacity: 0.4;
    animation: ttPulse var(--tt-speed, 7s) ease-in-out infinite;
    pointer-events: none;
    transition: opacity 800ms ease, filter 800ms ease, transform 800ms ease;
  }

  .to-top:hover::before,
  .to-top:focus-visible::before {
    --tt-speed: 5.5s;
    opacity: 0.6;
    filter: blur(1.5px) saturate(1.05) brightness(1.06);
  }

  .rocket-icon {
    color: white;
    transition: transform 500ms ease;
    will-change: transform;
  }

  .to-top:hover .rocket-icon,
  .to-top:focus-visible .rocket-icon {
    transform: translateY(-1px) rotate(-30deg);
  }

  @keyframes ttPulse {
    0%,
    100% {
      transform: scale(1);
      opacity: 0.45;
    }
    50% {
      transform: scale(1.05);
      opacity: 0.65;
    }
  }

  @media (prefers-reduced-motion: reduce) {
    .to-top::before {
      animation: none;
      opacity: 0.45;
    }
    .rocket-icon {
      transition: none;
    }
  }
}

/* Shine animation for CTA button */
@keyframes bg-move {
  0% {
    background-position: -500px 0;
  }
  100% {
    background-position: 1000px 0;
  }
}

.button-shine {
  background-image: linear-gradient(
    270deg,
    rgba(100, 181, 239, 0) 48.44%,
    #64b5ef 75.52%,
    rgba(100, 181, 239, 0) 100%
  );
  background-repeat: no-repeat;
  animation: bg-move linear 3s infinite;
  background-size: 200% auto;
}
